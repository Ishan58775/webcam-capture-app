<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
h2 { margin-bottom: 20px; }
.user-group { margin-bottom: 30px; padding: 15px; background: #fff; border-radius: 8px; box-shadow: 0 0 5px #ccc; }
.user-group h3 { margin-bottom: 10px; }
.user-group img { width: 200px; margin-right: 10px; border: 1px solid #ddd; border-radius: 4px; }
</style>
</head>
<body>
<h2>Admin Panel - Uploaded Photos</h2>

<% 
    const users = {};
    files.forEach(file => {
        // filename format: Name_type_timestamp.jpg
        const match = file.match(/^(.+)_(front|back)_\d+\.jpg$/);
        if (match) {
            const [_, name, type] = match;
            if (!users[name]) users[name] = {};
            users[name][type] = file;
        }
    });
%>

<% Object.keys(users).forEach(name => { %>
    <div class="user-group">
        <h3>User: <%= name %></h3>
        <% if(users[name].front) { %>
            <p>Front Camera:</p>
            <img src="/uploads/<%= users[name].front %>" alt="Front Photo">
        <% } %>
        <% if(users[name].back) { %>
            <p>Back Camera:</p>
            <img src="/uploads/<%= users[name].back %>" alt="Back Photo">
        <% } %>
    </div>
<% }) %>

</body>
</html>
